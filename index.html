<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>수면 분석 챗봇</title>
  <style>
    body { font-family: sans-serif; margin: 2rem; }
    textarea { width: 100%; height: 100px; }
    #result { margin-top: 1rem; padding: 1rem; border: 1px solid #ccc; }
  </style>
</head>
<body>
  <h1>수면 분석 챗봇</h1>
  <textarea id="message" placeholder="최근 수면 습관을 입력해 주세요..."></textarea>
  <button onclick="sendMessage()">분석 요청</button>
  <div id="result">분석 결과가 여기에 표시됩니다.</div>

  <script>
    async function sendMessage() {
      const message = document.getElementById("message").value;
      const resultElement = document.getElementById("result");
      resultElement.textContent = "분석 중...";

      try {
        // 실제 API 호출 대신 mock 응답 처리
        const data = {
          result: {
            summary: "수면 시간이 일정하지 않고 중간에 자주 깨어 수면의 질이 낮습니다.",
            issues: [
              "수면 시간이 들쑥날쑥합니다.",
              "새벽에 자주 깹니다.",
              "잠들기까지 시간이 오래 걸립니다."
            ],
            suggestions: [
              "매일 같은 시간에 잠자리에 들도록 노력해보세요.",
              "취침 1시간 전에는 스마트폰, TV 등을 멀리하세요.",
              "수면 일기를 작성해 자신의 패턴을 기록해보세요."
            ]
          }
        };

        const { summary, issues, suggestions } = data.result;
        resultElement.innerHTML = `
          <strong>📝 요약:</strong> ${summary}<br>
          <strong>⚠️ 문제점:</strong> <ul>${issues.map(i => `<li>${i}</li>`).join("")}</ul>
          <strong>💡 솔루션:</strong> <ul>${suggestions.map(s => `<li>${s}</li>`).join("")}</ul>
        `;
      } catch (error) {
        console.error("분석 실패:", error);
        resultElement.textContent = "분석에 실패했습니다.";
      }
    }
  </script>
</body>
</html>
